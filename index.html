<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>订阅链接生成器</title>
</head>
<body>
    <h1>订阅链接生成器</h1>
    <form id="subscription-form">
        <label for="airport-name">机场名称:</label>
        <input type="text" id="airport-name" required><br><br>
        
        <label for="airport-url">机场网址:</label>
        <input type="text" id="airport-url" required><br><br>

        <button type="submit">生成订阅链接</button>
    </form>

    <div id="result" style="display: none;">
        <p><strong>生成的订阅链接:</strong> <span id="subscription-link"></span></p>
        <p><strong>订阅流量:</strong> <span id="total-traffic"></span></p>
        <p><strong>已用上行流量:</strong> <span id="used-upload"></span></p>
        <p><strong>已用下行流量:</strong> <span id="used-download"></span></p>
        <p><strong>剩余流量:</strong> <span id="remaining-traffic"></span></p>
        <p><strong>过期时间:</strong> <span id="expire-time"></span></p>
    </div>

    <script>
        // 监听表单提交事件
        document.getElementById("subscription-form").addEventListener("submit", function(e) {
            e.preventDefault();  // 阻止表单默认提交

            // 获取用户输入
            var airportName = document.getElementById("airport-name").value;
            var airportUrl = document.getElementById("airport-url").value;

            // 模拟生成流量数据（这里可以根据需求做更多处理）
            var totalTraffic = Math.floor(Math.random() * 10 + 1) * 100;  // 100GB - 1000GB
            var usedUpload = Math.floor(Math.random() * (totalTraffic * 1024 * 1024 * 1024 / 10));  // 随机生成上行流量，最多为总流量的10%
            var usedDownload = Math.floor(Math.random() * (totalTraffic * 1024 * 1024 * 1024 / 5));  // 随机生成下行流量，最多为总流量的50%
            var usedTotal = usedUpload + usedDownload;
            var remainingTraffic = totalTraffic - usedTotal;

            // 设置过期时间，至少30天，最多730天（即2年）
            var minExpireDays = 30;
            var maxExpireDays = 730;
            var expireTimestamp = Math.floor(Date.now() / 1000) + (Math.floor(Math.random() * (maxExpireDays - minExpireDays + 1)) + minExpireDays) * 86400;  // 随机过期时间

            // 模拟 Mocky.io 生成的订阅链接
            var mockyUrl = "https://mocky.io/v3/" + Math.random().toString(36).substring(7);  // 随机生成链接

            // 格式化时间为年-月-日格式
            var expireDate = new Date(expireTimestamp * 1000).toLocaleString();

            // 显示生成的订阅链接和流量信息
            document.getElementById("subscription-link").innerText = mockyUrl;
            document.getElementById("total-traffic").innerText = totalTraffic + " GB";
            document.getElementById("used-upload").innerText = (usedUpload / (1024 * 1024 * 1024)).toFixed(2) + " GB";
            document.getElementById("used-download").innerText = (usedDownload / (1024 * 1024 * 1024)).toFixed(2) + " GB";
            document.getElementById("remaining-traffic").innerText = (remainingTraffic / (1024 * 1024 * 1024)).toFixed(2) + " GB";
            document.getElementById("expire-time").innerText = expireDate;
            
            // 显示结果区域
            document.getElementById("result").style.display = "block";
        });
    </script>
</body>
</html>